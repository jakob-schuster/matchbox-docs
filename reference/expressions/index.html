<!DOCTYPE html>
<html lang="en-US">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Calistoga&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=info" />
    <meta charset="UTF-8" />
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="base" content="https://jakob-schuster.github.io/matchbox-docs" />

    <title></title>
    <meta
      name="description"
      itemprop="about"
      content=""
    />
    <link rel="stylesheet" href="https://jakob-schuster.github.io/matchbox-docs/styles.css" />
    <!-- <script defer type="module" src="https://jakob-schuster.github.io/matchbox-docs/tinysearch_engine.js?h=e2e8bff3133f60971be6"></script> -->
    <script defer type="module" src="https://jakob-schuster.github.io/matchbox-docs/js/tinysearch.js?h=4d3fc5229a7d46b41777"></script>

  </head>

  <body>
    <div class="wrapper">
      <header>
        <!-- site logo -->
        <a href="https://jakob-schuster.github.io/matchbox-docs">
          <img
            src="https://jakob-schuster.github.io/matchbox-docs/img/logo.png"
            class="site-logo"
            alt="Logo"
            width="275px"
            height="auto"
          />
        </a>

        <p></p>

        <!-- view on github -->
        <p class="view"
          ><a href="https://github.com/jakob-schuster/matchbox"
            >View the project on GitHub.
            <small>jakob-schuster/matchbox</small></a
          ></p
        >

        <!-- search bar -->
        <!-- <div>
          <div>
            <form autocomplete=off class="js" name="goSearch" id="searchbox">
              <div class="searchd">
                <input id="searchinput" type="text" placeholder="Search" title="Search" />
                <button type="submit" title="Search" class="svgs svgm search"></button>
              </div>
              <div class="results"><div id="suggestions"></div></div>
            </form>
          </div>
        </div> -->

        <!-- navigation list -->
        <h2>Navigation</h2>
        <nav role="navigation">
          <ul>
            <li><a href="https://jakob-schuster.github.io/matchbox-docs">Quick start</a></li>
              
                  
                  
                      
                      <li >
                          
                          <a href="https://jakob-schuster.github.io/matchbox-docs/guides/">
                              
                              Guides
                          </a>
                          
                              <ul>
                                  
                                      <li >
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/guides/searching-for-primers/">
                                              
                                              Searching for sequences
                                          </a>
                                      </li>
                                  
                                      <li >
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/guides/extracting-fixed-regions/">
                                              
                                              Fixed-length regions
                                          </a>
                                      </li>
                                  
                                      <li >
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/guides/demultiplexing/">
                                              
                                              Demultiplexing
                                          </a>
                                      </li>
                                  
                                      <li >
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/guides/working-with-metadata/">
                                              
                                              Manipulating read metadata
                                          </a>
                                      </li>
                                  
                                      <li >
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/guides/command-line-arguments/">
                                              
                                              Command-line arguments
                                          </a>
                                      </li>
                                  
                              </ul>
                          
                      </li>
                  
                      
                      <li >
                          
                          <a href="https://jakob-schuster.github.io/matchbox-docs/reference/">
                              
                              Reference
                          </a>
                          
                              <ul>
                                  
                                      <li >
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/reference/statements/">
                                              
                                              Statements
                                          </a>
                                      </li>
                                  
                                      <li >
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/reference/patterns/">
                                              
                                              Patterns
                                          </a>
                                      </li>
                                  
                                      <li >
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/reference/types/">
                                              
                                              Types
                                          </a>
                                      </li>
                                  
                                      <li class="active">
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/reference/expressions/">
                                              
                                              Expressions
                                          </a>
                                      </li>
                                  
                                      <li >
                                          <a href="https://jakob-schuster.github.io/matchbox-docs/reference/functions/">
                                              
                                              Function list
                                          </a>
                                      </li>
                                  
                              </ul>
                          
                      </li>
                  
              
          </ul>
        </nav>

        <!-- spacer (to position the footer correctly) -->
        <div id="spacer"></div>
      
        <!-- matchbox version number and zola -->
        <footer>
          <p>
            <small>
              <i>matchbox</i> official documentation v1.0.3. 
              <br/>
              Powered by <a href="https//www.getzola.org/">Zola</a> &mdash; Themed
              with
              <a href="https://github.com/semanticdata/zola-minimal/">Minimal</a
              >.<br />
            </small>
          </p>
        </footer>
      </header>

      <!-- main page content -->
      <section> 
<h1>Expressions</h1>
<p>Expressions are the smallest unit of <em>matchbox</em> syntax.</p>
<!-- <table>
    <th>Name</th>
    <th>Syntax</th>
    <th>Description</th>
    <tr>
        <td>Boolean literal</td>
        <td><code>true</code>, <code>false</code></td>
        <td>Matches any number of any nucleotides.</td>
    </tr>
    <tr>
        <td>Numeric literal</td>
        <td>n</td>
        <td>Matches any number of any nucleotides.</td>
    </tr>
    <tr>
        <td>String </td>
        <td>n</td>
        <td>Matches any number of any nucleotides.</td>
    </tr>
</table> -->
<hr />
<div class="function_block">
<h2 id="variables">Variables</h2>
<p>A variable name, defined earlier in the script.</p>
<p>Variable names can include letters, numbers and underscores. A name must start with a letter or an underscore. Variable names must be unique, and can't be overwritten.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="color:#bf616a;">a </span><span>= </span><span style="color:#a3be8c;">&#39;hello&#39;
</span><span style="color:#65737e;"># expressions can refer to bound variables
</span><span style="color:#bf616a;">b </span><span>= </span><span style="color:#bf616a;">a
</span><span>
</span><span style="color:#65737e;"># variables bound in patterns are accessible 
</span><span style="color:#65737e;"># inside the body of the branch
</span><span style="color:#b48ead;">if </span><span style="font-weight:bold;color:#ebcb8b;">read </span><span style="color:#b48ead;">matches [</span><span style="color:#bf616a;">fst</span><span>:</span><span style="color:#d08770;">|5| _</span><span style="color:#b48ead;">] =&gt; </span><span style="color:#bf616a;">fst</span><span>.</span><span style="color:#bf616a;">seq</span><span>.</span><span style="color:#8fa1b3;">stdout!()
</span><span>
</span><span style="color:#65737e;"># but NOT outside it! 
</span><span style="color:#bf616a;">fst</span><span>.</span><span style="color:#bf616a;">seq</span><span>.</span><span style="color:#8fa1b3;">len()</span><span>.</span><span style="color:#8fa1b3;">average!()
</span></code></pre>
</div>
<hr />
<div class="function_block">
<h2 id="boolean-literals">Boolean literals</h2>
<p>There are only two <code class="type">Bool</code> literals: <code>true</code> and <code>false</code>.</p>
</div>
<hr />
<div class="function_block">
<h2 id="numeric-literals">Numeric literals</h2>
<p>Numeric literals can be negative, and can include a decimal component.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="color:#bf616a;">a </span><span>= </span><span style="color:#d08770;">10000
</span><span>
</span><span style="color:#65737e;"># b will be -1000
</span><span style="color:#bf616a;">b </span><span>= </span><span style="color:#bf616a;">a </span><span>/ -</span><span style="color:#d08770;">10
</span><span>
</span><span style="color:#65737e;"># c will be -999.99
</span><span style="color:#bf616a;">c </span><span>= </span><span style="color:#bf616a;">b </span><span>+ </span><span style="color:#d08770;">0.01
</span></code></pre>
</div>
<hr />
<div class="function_block">
<h2 id="string-literals">String literals</h2>
<p>Strings must be constructed using single quotes; for example, <code>'hello world'</code>. Values can be inserted into strings using curly braces <code>{}</code>.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="color:#bf616a;">message </span><span>= </span><span style="color:#a3be8c;">&#39;read named </span><span style="color:#96b5b4;">{</span><span style="font-weight:bold;color:#ebcb8b;">read</span><span>.</span><span style="color:#bf616a;">id</span><span style="color:#96b5b4;">}</span><span style="color:#a3be8c;"> is </span><span style="color:#96b5b4;">{</span><span style="font-weight:bold;color:#ebcb8b;">read</span><span>.</span><span style="color:#bf616a;">seq</span><span>.</span><span style="color:#8fa1b3;">len()</span><span style="color:#96b5b4;">}</span><span style="color:#a3be8c;"> bases&#39;
</span><span>
</span><span style="color:#8fa1b3;">stdout!(</span><span style="color:#bf616a;">message</span><span style="color:#8fa1b3;">)
</span></code></pre>
</div>
<hr />
<div class="function_block">
<h2 id="list-literals">List literals</h2>
<p>List literals are a set of square brackets, containing a number of values. All values must be of the same type.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="color:#65737e;"># creating a list of Str
</span><span style="color:#bf616a;">barcodes </span><span>= </span><span style="color:#b48ead;">[</span><span style="color:#d08770;">AAAA</span><span>, </span><span style="color:#d08770;">CCCC</span><span>, </span><span style="color:#d08770;">GTGT</span><span style="color:#b48ead;">]
</span><span>
</span><span style="color:#65737e;"># accessing a field of a record with a dot
</span><span style="color:#b48ead;">if </span><span style="font-weight:bold;color:#ebcb8b;">read </span><span style="color:#b48ead;">matches [</span><span style="color:#d08770;">_ </span><span style="color:#bf616a;">b </span><span style="color:#d08770;">_</span><span style="color:#b48ead;">] for </span><span style="color:#bf616a;">b </span><span style="color:#b48ead;">in </span><span style="color:#bf616a;">barcodes </span><span style="color:#b48ead;">=&gt; </span><span style="font-weight:bold;color:#ebcb8b;">read</span><span>.</span><span style="color:#bf616a;">id </span><span>|&gt; </span><span style="color:#8fa1b3;">stdout!()
</span></code></pre>
</div>
<hr />
<div class="function_block">
<h2 id="record-literals">Record literals</h2>
<p>Record literals are a set of curly braces, containing a number of fields. Each field has a name and an expression, separated by equals.</p>
<p>Fields can be accessed using a dot.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="color:#65737e;"># creating a record, assigning values to some fields
</span><span style="color:#bf616a;">rec </span><span>= </span><span style="color:#96b5b4;">{
</span><span>    </span><span style="color:#bf616a;">primer </span><span>= </span><span style="color:#d08770;">AAGTCGATGCTAGTG</span><span>,
</span><span>    </span><span style="color:#bf616a;">output </span><span>= </span><span style="color:#a3be8c;">&#39;out.fq&#39;</span><span>,
</span><span style="color:#96b5b4;">}
</span><span>
</span><span style="color:#65737e;"># accessing a field of a record with a dot
</span><span style="color:#b48ead;">if </span><span style="font-weight:bold;color:#ebcb8b;">read </span><span style="color:#b48ead;">matches [</span><span style="color:#d08770;">_ </span><span style="color:#bf616a;">rec</span><span>.</span><span style="color:#bf616a;">primer </span><span style="color:#d08770;">_</span><span style="color:#b48ead;">] =&gt; </span><span style="font-weight:bold;color:#ebcb8b;">read</span><span>.</span><span style="color:#8fa1b3;">out!(</span><span style="color:#bf616a;">rec</span><span>.</span><span style="color:#bf616a;">output</span><span style="color:#8fa1b3;">)
</span></code></pre>
</div>
<hr />
<!-- <div class="function_block">

## Function literals

New functions can be defined using function literal syntax. Arguments must be declared with their types, in parentheses, separated by commas. The body of the function comes after an arrow `=>`. The function's return type is inferred from its body.

Variable names can be assigned to functions, just like any other value.

```matchbox
# a function that  numbers
f = (n1: Num, n2: Num) => n1 * 3

# a function which formats the result of f into a Str
g = (n: Num) => '{n} times two equals {f(n)}'
```

Functions can also take optional named arguments. These must come after positional arguments in the function definition, and they have a default value which is an expression. 

```matchbox
print_both = (v1: Str, v2: Str, separator: Str = ' & ') =>
    '{v1}{separator}{v3}'
```

</div>

--- -->
<div class="function_block">
<h2 id="function-application">Function application</h2>
<p>A function can be applied by writing the function name followed by parentheses enclosing a comma-separated list of arguments.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="color:#bf616a;">n </span><span>= </span><span style="color:#8fa1b3;">len(</span><span style="font-weight:bold;color:#ebcb8b;">read</span><span>.</span><span style="color:#bf616a;">seq</span><span style="color:#8fa1b3;">)
</span></code></pre>
<p>Alternatively, a function can be applied with the first argument in front and a dot before the function name. All of the remaining arguments are still written inside the parentheses.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="color:#65737e;"># equivalent
</span><span style="color:#bf616a;">n </span><span>= </span><span style="font-weight:bold;color:#ebcb8b;">read</span><span>.</span><span style="color:#bf616a;">seq</span><span>.</span><span style="color:#8fa1b3;">len()
</span></code></pre>
<p>Similarly, the pipe operator <code>|&gt;</code> can also be used to apply functions.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="color:#65737e;"># also equivalent
</span><span style="color:#bf616a;">n </span><span>= </span><span style="font-weight:bold;color:#ebcb8b;">read</span><span>.</span><span style="color:#bf616a;">seq </span><span>|&gt; </span><span style="color:#8fa1b3;">len()
</span><span>
</span><span style="color:#65737e;"># useful when chaining functions together!
</span><span style="font-weight:bold;color:#ebcb8b;">read 
</span><span>    </span><span style="color:#d08770;">|</span><span>&gt; </span><span style="color:#8fa1b3;">tag(</span><span style="color:#a3be8c;">&#39;length=</span><span style="color:#96b5b4;">{</span><span style="color:#8fa1b3;">len(</span><span style="font-weight:bold;color:#ebcb8b;">read</span><span>.</span><span style="color:#bf616a;">seq</span><span style="color:#8fa1b3;">)</span><span style="color:#96b5b4;">}</span><span style="color:#a3be8c;">&#39;</span><span style="color:#8fa1b3;">) 
</span><span>    </span><span style="color:#d08770;">|</span><span>&gt; </span><span style="color:#8fa1b3;">out!(</span><span style="color:#a3be8c;">&#39;file.fq&#39;</span><span style="color:#8fa1b3;">)
</span></code></pre>
<p>Some functions take optional named arguments. These must be given after all the mandatory arguments. The optional arguments themselves can then be given in any order.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="font-weight:bold;color:#ebcb8b;">read</span><span>.</span><span style="color:#8fa1b3;">describe(
</span><span>    </span><span style="color:#96b5b4;">{ </span><span style="color:#bf616a;">polya </span><span>= </span><span style="color:#d08770;">AAAAAAAAAA </span><span style="color:#96b5b4;">}</span><span>, 
</span><span>    </span><span style="color:#bf616a;">reverse_complement </span><span>= </span><span style="color:#d08770;">true
</span><span style="color:#8fa1b3;">)</span><span>.</span><span style="color:#8fa1b3;">count!()
</span></code></pre>
</div>
<hr />
<div class="function_block">
<h2 id="operators">Operators</h2>
<p>A number of built-in common operators can be used. They are applied prefix or infix as appropriate.</p>
<pre data-lang="matchbox" style="background-color:#2b303b;color:#c0c5ce;" class="language-matchbox "><code class="language-matchbox" data-lang="matchbox"><span style="color:#65737e;"># + and &gt; are both operators
</span><span style="color:#b48ead;">if </span><span style="color:#d08770;">10 </span><span>+ </span><span style="color:#d08770;">2 </span><span>&gt; </span><span style="color:#d08770;">11 </span><span style="color:#96b5b4;">{
</span><span>    </span><span style="color:#a3be8c;">&#39;basic maths&#39; </span><span>|&gt; </span><span style="color:#8fa1b3;">stdout()
</span><span style="color:#96b5b4;">}
</span></code></pre>
<p>Some operators bind more tightly than others. The full list of operators is given below, from tightest to loosest precedence.</p>
<table>
<th>Precedence</th>
<th>Operators</th>
<tr>
<td>0</td><td>
    <i>All other expressions</i><br>
    <!-- <i>Function / method calls</i><br>
    <i>Accessing fields of records</i><br> -->
</td>
<td>
</td>
</tr>
<tr>
<td>1</td><td>
    <table>
        <tr>
            <td style="width:9em"><code> -</code><code class="type">Num</code></td>
            <td style="width:12em">Unary negation</td>
        </tr>
        <tr>
            <td><code> -</code>( <code class="type">Str</code> | <code class="type">Read</code> )</td>
            <td>Reverse-complementation</td>
        </tr>
        <tr>
            <td style="width:9em"><code> not </code><code class="type">Bool</code></td>
            <td style="width:12em">Logical NOT</td>
        </tr>
    </table>
</td>
</tr>
<tr>
<td>2</td><td>
    <table>
        <tr>
            <td style="width:9em"><code class="type">Num</code><code> * </code><code class="type">Num</code></td>
            <td style="width:12em">Multiplication</td>
        </tr>
        <tr>
            <td><code class="type">Num</code><code> / </code><code class="type">Num</code></td>
            <td>Division</td>
        </tr>
        <tr>
            <td><code class="type">Num</code><code> % </code><code class="type">Num</code><br></td>
            <td>Modulo</td>
        </tr>
    </table>
</td>
</tr>
<tr>
<td>3</td><td>
    <table>
        <tr>
            <td style="width:9em"><code class="type">Num</code><code> + </code><code class="type">Num</code></td>
            <td style="width:12em">Addition</td>
        </tr>
        <tr>
            <td><code class="type">Num</code><code> - </code><code class="type">Num</code></td>
            <td>Subtraction</td>
        </tr>
    </table>
</td>
</tr>
<tr>
<td>4</td><td>
    <table>
        <tr>
            <td style="width:9em"><code class="type">Num</code><code> < </code><code class="type">Num</code></td>
            <td style="width:12em">Less than</td>
        </tr>
        <tr>
            <td><code class="type">Num</code><code> > </code><code class="type">Num</code></td>
            <td>Greater than</td>
        </tr>
        <tr>
            <td><code class="type">Num</code><code> <= </code><code class="type">Num</code></td>
            <td>Less than or equal</td>
        </tr>
        <tr>
            <td><code class="type">Num</code><code> >= </code><code class="type">Num</code></td>
            <td>Greater than or equal</td>
        </tr>
    </table>
</td>
</tr>
<tr>
<td>5</td><td>
    <table>
        <tr>
            <td style="width:9em"><code class="type">Any</code><code> == </code><code class="type">Any</code></td>
            <td style="width:12em">Equality</td>
        </tr>
        <tr>
            <td><code class="type">Any</code><code> != </code><code class="type">Any</code></td>
            <td>Inequality</td>
        </tr>
    </table>
</td>
</tr>
<tr>
<td>6</td><td>
    <table>
        <tr>
            <td style="width:9em"><code class="type">Bool</code><code> and </code><code class="type">Bool</code></td>
            <td style="width:12em">Logical AND</td>
        </tr>
    </table>
</td>
</tr>
<tr>
<td>7</td><td>
    <table>
        <tr>
            <td style="width:9em"><code class="type">Bool</code><code> or </code><code class="type">Bool</code></td>
            <td style="width:12em">Logical OR</td>
        </tr>
    </table>
</td>
</tr>
</table>
</div>
 </section>

    </div>
  </body>
</html>
